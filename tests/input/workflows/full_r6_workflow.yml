project-dir: r6-test
config: r6-rproject.toml

test:
  steps:
  - name: "rv init"
    run: "rv init"
    thread: rv
 
  - name: "start R"
    run: "R"
    thread: r
    assert: "rv libpaths active!"
  
  - name: "rv sync"
    run: "rv sync"
    thread: rv
    assert: "+ R6 (2.6.1, binary from https://packagemanager.posit.co/cran/2025-07-10)"
 
  - name: "Load packages"
    run: load_r6.R
    thread: r
    assert: "R6_VERSION: 2.6.1"

  - name: "install old version"
    run: install_old_r6.R
    thread: r

  - name: "load old packages"
    run: load_r6.R
    thread: r
    assert: "R6_VERSION: 2.5.1"
  
  - name: "rv plan"
    run: "rv plan"
    thread: rv

  - name: "rv sync"
    run: "rv sync"
    thread: rv

  - name: "load new packages"
    run: load_r6.R
    thread: r
    assert: "R6_VERSION: 2.6.1"
